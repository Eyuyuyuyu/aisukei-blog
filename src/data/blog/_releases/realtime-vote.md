---
author: "Aisukei"
pubDatetime: 2025-08-21T13:42:00.000Z
title: "《用 Vibe Coding 打造一个实时投票 H5：从零到上线》"
featured: true  # 是否在首页置顶
draft: false     # 是否为草稿
tags: ["技术", "编程", "vibe coding"]  # 标签
description: "文章描述"

---
## **🏁 为什么要做这个项目？**

  

有时候我们只想临时拉个投票：

- 不想注册账号
    
- 不想填一堆表单
    
- 就想发一个链接，点开就能投票
    

  

于是我决定用 **Vibe Coding + Cursor**，边写边生成代码，做一个 **实时投票 H5**。

👉 核心要求：**轻量、匿名、实时、移动端适配**。

---

## **✨ 功能设计**

  

✅ **支持的功能**

- 创建投票（标题、选项、单选/多选、有效期）
    
- 分享链接（发起人直接进入投票页，别人点开就能投）
    
- 投票后实时更新结果（横向进度条）
    
- 有效期到后自动提示过期
    
- 匿名投票、防重复（localStorage + cookie 双保险）
    
- 结果页可单独访问
    

  

❌ **不需要的功能**

- 注册/登录（所有人都能创建和投票）
    

---

## **🛠 技术栈选择**

  

选技术的时候，我只考虑三点：**快、好看、实时**

- **React 18 + Vite + TypeScript**：开发体验丝滑
    
- **Tailwind CSS + shadcn/ui**：UI 统一，改主题超级方便
    
- **Framer Motion**：动画必须要顺滑
    
- **Recharts**：投票结果百分比柱状图
    
- **Supabase Realtime**：保证多人同时投票时实时更新
    
- **移动端优先设计**：适配手机，随手发个链接就能用
    

---

## **⚡ 开发过程 Step by Step**

  

> 我是用 **Cursor + Rules** 让 AI 和我一起配合的，每一步都很快。

  

### **Step 1：搭建项目骨架**

- vite + react + ts 初始化
    
- 配好 tailwind，支持深/浅色模式
    
- 建立 3 个页面：/create（创建）、/poll/:id（投票）、/result/:id（结果）
    

  

### **Step 2：写 Rules（项目规范）**

- 所有颜色/尺寸集中管理在 /src/config/theme.ts
    
- 动画必须用 Framer Motion
    
- 图表统一用 Recharts
    
- Supabase 实时必须走 subscribe
    

  

👉 有了这些规则，Cursor 生成代码时不跑偏。

  

### **Step 3：UI 配置**

- 新建 ui-config.ts
    
- 定义按钮颜色：confirm（橙色）、delete（红色）、cancel（灰色）
    
- 深浅色模式切换
    
- 做了个 **UIShowcase** 页面：一眼能看到所有按钮和进度条效果
    

  

### **Step 4：创建投票页**

- 填写：投票标题 + 单选/多选 + 选项（至少2个） + 有效期（可选）
    
- 数据存 Supabase，生成唯一 ID
    
- 成功后跳转 /poll/:id
    

  

### **Step 5：投票页（单选模式）**

- 读 Supabase 数据
    
- 点击选项 = 直接投票
    
- 立即进入结果模式（动画 + 实时更新）
    
- 过期则提示 “投票已截止”
    

  

### **Step 6：结果页**

- 独立访问 /result/:id 也能看到结果
    
- 进度条显示百分比（Recharts）
    
- 实时同步
    

  

### **Step 7：附加功能**

- 分享链接（发给朋友直接投票）
    
- 防刷票逻辑（localStorage + cookie）
    
- 离线检测（按钮置灰 + 提示）
    
- 截止前可选择「隐藏结果」
    

  

### **Step 8：UI 重构**

- 字体统一用 **General Sans**
    
- 主色调橙色 #fa8029（醒目但不土）
    
- 深色背景：#1f2124
    
- 浅色背景：#ffffff
    
- 所有按钮、卡片、进度条都带柔和圆角 + 阴影
    

---

## **🗄 数据库设计**

  

在 Supabase 里我设计了三张表：

1. **polls**（投票基本信息：标题、是否多选、截止时间、是否隐藏结果）
    
2. **options**（投票选项）
    
3. **votes**（投票记录：谁投了哪个选项）
    

  

👉 关键点：所有 ID 都是 **UUID**，这样分享链接更安全。

---

## **🚀 效果展示**

  

（这里你可以放几张截图或动图，比如：创建投票 → 投票 → 查看结果）

---

## **🔧 遇到的问题 & 解决方案**

- **实时更新卡顿？** → 用 Supabase Realtime 订阅 + 本地状态优化
    
- **防刷票？** → localStorage + cookie 双重验证
    
- **UI 太亮刺眼？** → 加了深色模式，晚上看也舒服
    

---

## **✅ 最终成果**

- 一个完整的 **匿名实时投票 H5**
    
- 分享即用，无需注册
    
- 投票体验流畅，动画细腻
    
- 支持移动端 / 桌面端
    

---

## **📌 下一步计划**

- 多选功能（正在做）
    
- 有效期逻辑（需要更严谨）
    
- 公共投票大厅（支持展示公开投票）
    
- 体验优化（二维码分享、性能调优）
    

---

## **🏆 总结**

  

这次我用 **Cursor + Vibe Coding**，几乎是边想边写：

- 从想法到能跑起来，不到一天
    
- Supabase Realtime 真香，省了不少 WebSocket 的功夫
    
- UI 有了 shadcn 和 Tailwind，改主题比喝水还快
    

  

👉 最直观的感受是：**AI 辅助开发真的能加速 5 倍以上**。

如果你也想做点小产品，不妨试试这种工作流。