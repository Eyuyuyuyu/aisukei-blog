---
author: "Aisukei"
pubDatetime: 2025-08-21T05:00:00.000Z
title: "我用 Cursor 在一天内从零打造了一款实时匿名投票神器"
featured: true  # 是否在首页置顶
draft: false     # 是否为草稿
tags: ["技术", "编程", "vibe coding"]  # 标签
description: "文章描述"

---

你是否也遇到过这样的场景：团队午饭吃什么？周末去哪玩？想快速征求一下朋友们的意见，却被各种需要注册、登录、填写复杂表单的投票应用劝退？

我就是。我想要的只是一个**极其简单**的工具：

- **不想注册账号**
    
- **不想填一堆表单**
    
- **就想发一个链接，点开就能投票**
    

既然找不到完美的，那就自己做一个！于是，我决定采用 **Vibe Coding + Cursor** 的开发模式，让 AI 陪我一起，从零开始打造一个**实时匿名投票 H5**。

👉 我的核心要求很简单：**轻量、匿名、实时、移动端适配**。

---

### ✨ **功能设计：只做你需要的**

在产品设计之初，明确“做什么”和“不做什么”同样重要。

✅ **核心功能:**

- **创建投票**：支持标题、选项、单选/多选切换和有效期设置。
    
- **链接分享**：创建者拿到链接直接进入投票页，其他人点开即投。
    
- **实时结果**：投票后，结果以横向进度条实时更新，无需刷新。
    
- **过期处理**：投票到达有效期后，自动提示已截止。
    
- **匿名与防刷**：采用 `localStorage` + `cookie` 双重保障，实现匿名下的基础防刷。
    
- **结果页独立访问**：结果页有独立链接，方便随时查看。
    

❌ **坚决不做:**

- **注册/登录系统**：保持纯粹，任何人都可以是创建者和投票者。
    

---

### 🛠 **技术栈：只为“快、好看、实时”服务**

我的技术选型完全服务于最终目标，标准只有三个字：**快、好看、实时**。

- **前端框架**: **React 18 + Vite + TypeScript**，这套组合带来的开发体验只能用“丝滑”来形容。
    
- **UI 方案**: **Tailwind CSS + shadcn/ui**，组件库风格统一，深/浅色模式切换和主题定制简直不要太方便。
    
- **动效**: **Framer Motion**，让所有交互动画都流畅、自然，这是优秀用户体验的灵魂。
    
- **图表**: **Recharts**，轻量且强大的图表库，用来展示投票结果的百分比柱状图再合适不过。
    
- **后端与实时通信**: **Supabase Realtime**，这绝对是本次开发的 MVP！它让我无需自己搭建 WebSocket 服务，就能轻松实现数据的实时同步。
    
- **设计理念**: **移动端优先 (Mobile First)**，确保在手机上能有最佳体验，随时随地掏出手机就能用。
    

---

### ⚡ **开发全流程：AI 如何助我一日千里**

> 我全程使用 **Cursor + Rules** 的方式进行开发，相当于有了一个懂我规范的 AI 结对编程伙伴，效率极高。

#### **Step 1：项目骨架搭建**

万事开头难？不存在的。

- `vite` 命令一键初始化 `react-ts` 项目。
    
- 迅速配置好 `Tailwind CSS`，并实现深/浅色模式的基本切换。
    
- 用 `react-router-dom` 建立三个核心页面路由：
    
    - `/create` (创建投票页)
        
    - `/poll/:id` (投票页)
        
    - `/result/:id` (结果页)
        

#### **Step 2：为 AI 设定规则 (Rules)**

这是与 AI 高效协作的关键一步。我提前在项目中定义了明确的开发规范，让 Cursor 生成的代码“不跑偏”。

- 所有颜色、尺寸等主题变量，统一在 `/src/config/theme.ts` 中管理。
    
- 所有动画效果，必须使用 `Framer Motion` 实现。
    
- 所有图表，统一使用 `Recharts` 组件。
    
- 所有 Supabase 的实时数据获取，必须走 `subscribe` 订阅模式。
    

有了这些规则，AI 就成了我的得力助手，而不是一个需要不断纠正的实习生。

#### **Step 3：UI 基础配置**

为了统一视觉风格，我创建了 `ui-config.ts` 文件，并搭建了一个 **UIShowcase** 页面，用于集中展示和调试所有 UI 组件。

- 定义按钮语义化颜色：`confirm` (橙色)、`delete` (红色)、`cancel` (灰色)。
    
- 实现一键切换深/浅色模式。
    
- 在 `UIShowcase` 页面，我可以一目了然地看到所有按钮、卡片、进度条在不同主题下的样式，极大提升了 UI 调试效率。
    

#### **Step 4：创建投票页**

这是应用的起点。表单逻辑清晰明了：

- 用户需填写：**投票标题**、选择**单选/多选**、添加**至少两个选项**。
    
- **有效期**为可选项。
    
- 点击创建后，数据通过 Supabase 的 aPI 存入数据库，并生成一个唯一的 `UUID`。
    
- 创建成功，自动跳转至投票页 `/poll/:id`。
    

#### **Step 5：核心投票页 (单选模式)**

这是用户交互的核心。

- 通过 URL 中的 `:id` 从 Supabase 读取投票数据。
    
- **点击选项即投票**，没有任何多余的确认按钮，操作直接。
    
- 投票后，页面立即切换到结果展示模式，伴随着流畅的动画效果。
    
- 如果投票已过期，页面会直接显示 “投票已截止” 的提示。
    

#### **Step 6：实时结果页**

- 结果页可以通过 `/result/:id` 独立访问。
    
- 使用 `Recharts` 绘制百分比进度条，直观展示各选项得票情况。
    
- 借助 Supabase Realtime，任何人的新投票都会实时同步到所有打开该页面的客户端。
    

#### **Step 7：锦上添花的功能**

- **一键分享链接**：方便地将投票链接发送给朋友。
    
- **防刷票逻辑**：在 `localStorage` 和 `cookie` 中同时记录用户的投票状态，虽然不能完全杜绝专业刷票，但对普通用户而言已足够。
    
- **离线检测**：监听网络状态，在离线时将操作按钮置灰并给出提示。
    
- **结果隐藏**：创建者可以选择在投票截止前隐藏实时结果，增加趣味性。
    

#### **Step 8：UI 视觉重构**

在功能全部跑通后，我花了一点时间对 UI 进行了精细打磨。

- **字体**：统一更换为更具现代感的 **General Sans**。
    
- **主色调**：选用醒目而不俗气的橙色 `#fa8029`。
    
- **背景色**：深色模式为 `#1f2124`，浅色模式为 `#ffffff`。
    
- **细节**：为所有按钮、卡片、进度条添加了柔和的圆角和细微的阴影，提升整体质感。
    

---

### 🗄 **数据库设计：简单而强大**

我在 Supabase 中只设计了三张表，清晰地支撑了所有业务逻辑：

1. **`polls`**：存储投票的基本信息，如标题、是否多选、截止时间、是否隐藏结果等。
    
2. **`options`**：存储每个投票的所有选项。
    
3. **`votes`**：记录每一票的投票记录，关联用户和选项。
    

👉 **关键点**：所有表的主键和关联 ID 都使用 **UUID**，这使得分享出去的链接更加安全，无法被轻易猜测。

---

### 🚀 **效果展示**

光说不练假把式，直接上图最直观！这里是项目的一些核心界面截图，展示了从创建到投票再到查看结果的完整流程。

- **[此处应有截图/动图：创建投票页面，展示标题、选项、有效期等输入框]**
    
    - _图注：简洁的创建界面，支持深/浅色模式。_
        
- **[此处应有截图/动图：用户投票过程，点击选项后出现动画效果]**
    
    - _图注：流畅的投票体验，点击即完成。_
        
- **[此处应有截图/动图：实时结果展示页，展示 Recharts 绘制的百分比进度条]**
    
    - _图注：实时更新的投票结果，一目了然。_
        

---

### 🔧 **踩坑与总结**

开发过程并非一帆风顺，也遇到了一些挑战：

- **问题：实时更新卡顿？**
    
    - **解决方案**：初期直接 `fetch` 数据导致延迟，后改为使用 Supabase Realtime 的 `subscribe` 模式订阅数据变更，配合 React 本地状态管理进行优化，做到了毫秒级响应。
        
- **问题：如何有效防刷票？**
    
    - **解决方案**：绝对的防刷需要复杂的设备指纹或登录系统，这与项目初衷相悖。因此我采用 `localStorage` + `cookie` 的双重客户端验证，作为一个轻量级的解决方案。
        
- **问题：默认的浅色模式在夜间太刺眼？**
    
    - **解决方案**：利用 Tailwind CSS 的强大能力，快速添加了深色模式，并将其作为一项可切换功能，让用户在任何环境下都能舒适使用。
        

---

### ✅ **最终成果**

经过一天的奋战，我收获了一个完整的 **匿名实时投票 H5 应用**。

- **分享即用**，无需任何注册登录。
    
- 投票体验**流畅**，动画**细腻**。
    
- 完美适配**移动端和桌面端**浏览器。
    

---

### 📌 **下一步计划**

这个小工具还有很大的成长空间，我的下一步计划是：

- **完善多选功能**（目前正在开发中）。
    
- **优化有效期逻辑**，提供更精确的时间控制。
    
- **上线公共投票大厅**，允许用户将投票设为公开，增加发现和互动。
    
- **体验优化**，例如增加二维码分享、进一步的性能调优等。
    

---

### 🏆 **写在最后**

这次开发经历让我再次感受到了现代化工具链的强大。

- 从一个想法到产品原型跑起来，**用时不到一天**。
    
- **Supabase Realtime** 真的太香了，它为我省去了大量原本需要投入在 WebSocket 上的时间和精力。
    
- 有了 **shadcn/ui 和 Tailwind CSS**，调整 UI 风格和主题就像呼吸一样简单。
    

👉 但最直观的感受是：**AI 辅助开发真的能将效率提升 5 倍以上**。无论是生成组件代码、调试 Bug，还是重构逻辑，Cursor 都能给出非常高质量的建议。

如果你也想把自己的小想法快速变成现实，强烈推荐你试试这种“人与 AI 结对编程”的工作流！